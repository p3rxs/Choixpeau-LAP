<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">
    <title>Le choipeaux gangsta</title>
    <meta charset="utf-8">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.0/brython_stdlib.js"></script>
    <script type="text/javascript" src="code.js"></script>
</head>
<body>
    <h1>Salutation voyageur! Voici le choipeaux gangsta!</h1>
    <p>Et voilà le premier paragraphe ;)</p>
    <aside>
        <img src="image/shield_gry.gif" alt="gryffondor" />
        <img src="image/shield_huf.gif" alt="hufllpuff"/>
        <img src="image/shield_rav.gif" alt="ravenclaw" />
        <img src="image/shield_sly.gif" alt="serpentard"/>
    </aside>
    <div id="resultats">
        <!-- Contenu généré par JavaScript sera inséré ici -->
    </div>
    <button id="button1">Créer le questionnaire</button>
    <button id="button2">Changer de page?</button>
    <script>
        document.getElementById("button2").innerHTML = "3emepage.html"
        document.getElementById('button1').addEventListener('click', function() {
            // Charger le fichier CSV et effectuer les calculs
            // Remplacez cette partie par le code nécessaire pour charger le fichier CSV, extraire les données et effectuer les calculs
            function csvToTable(csvData) {
                const lines = csvData.split('\n');
                const table = [];
                const keys = lines[0].trim().split(';');

                for (let i = 1; i < lines.length; i++) {
                    const line = lines[i].trim();
                    if (line !== '') { // Skip empty lines
                        const values = line.split(';');
                        const record = {};
                        for (let j = 0; j < keys.length; j++) {
                            record[keys[j]] = values[j] ? values[j].trim() : null; // Trim values
                        }
                        table.push(record);
                    }
                }
                return table;
            }
            // Assurez-vous de définir la variable poudlardCharacters avec les données appropriées
            const poudlard_characters = fusion_table(csvToTable("Caracteristiques_des_persos.csv"), csvToTable("Characters.csv"));
            // Une fois les calculs terminés, affichez le résultat
            const resultatsDiv = document.getElementById('resultats');
            resultatsDiv.innerHTML = ''; // Vide le contenu précédent
            for (const perso of personnagesATester) {
                const [table, persoAvecMaison] = testePersoVoisins(poudlard_characters, perso);
                const divPerso = document.createElement('div');
                divPerso.innerHTML = `
                    <p>Ce personnage a un courage de ${perso['Courage']}, une ambition de ${perso['Ambition']}, une intelligence de ${perso['Intelligence']}, une tendance à la bonté de ${perso['Good']},</p>
                    <p>Il irait bien chez les ${perso['Maison']}</p>
                    <p>Ses 5 plus proche voisins sont:</p>
                `;
                const ulVoisins = document.createElement('ul');
                for (const voisin of table.slice(0, k)) {
                    const liVoisin = document.createElement('li');
                    liVoisin.textContent = `${voisin['Name']}, ${voisin['House']}, ${voisin['Distance']}`;
                    ulVoisins.appendChild(liVoisin);
                }
                divPerso.appendChild(ulVoisins);
                resultatsDiv.appendChild(divPerso);
            }
        });
    </script>

</body>
</html>
